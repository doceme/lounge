<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Documents | Lounge</title>
    <meta name="description" content="Simple Mongoose-inspired ODM for Couchbase">
    
    
    <link rel="preload" href="/lounge/assets/css/styles.12415a86.css" as="style"><link rel="preload" href="/lounge/assets/js/app.12415a86.js" as="script"><link rel="preload" href="/lounge/assets/js/13.b89e501f.js" as="script"><link rel="prefetch" href="/lounge/assets/js/10.fa165eda.js"><link rel="prefetch" href="/lounge/assets/css/1.styles.3ac4ce2d.css"><link rel="prefetch" href="/lounge/assets/js/1.3ac4ce2d.js"><link rel="prefetch" href="/lounge/assets/css/2.styles.79fb4200.css"><link rel="prefetch" href="/lounge/assets/js/2.79fb4200.js"><link rel="prefetch" href="/lounge/assets/js/3.f9886194.js"><link rel="prefetch" href="/lounge/assets/js/4.8b21615e.js"><link rel="prefetch" href="/lounge/assets/js/5.7430e7bb.js"><link rel="prefetch" href="/lounge/assets/js/6.efd591e7.js"><link rel="prefetch" href="/lounge/assets/js/7.8228a4ac.js"><link rel="prefetch" href="/lounge/assets/js/8.181dfe89.js"><link rel="prefetch" href="/lounge/assets/js/9.bb2e99b6.js"><link rel="prefetch" href="/lounge/assets/js/11.b439bcd1.js"><link rel="prefetch" href="/lounge/assets/js/12.d819a3e0.js"><link rel="prefetch" href="/lounge/assets/js/14.c9de2d47.js"><link rel="prefetch" href="/lounge/assets/js/15.b6920dcf.js"><link rel="prefetch" href="/lounge/assets/js/16.68bcd357.js"><link rel="prefetch" href="/lounge/assets/js/17.5d7a1cc7.js"><link rel="prefetch" href="/lounge/assets/js/18.64a4d15b.js"><link rel="prefetch" href="/lounge/assets/js/19.ff6e457b.js"><link rel="prefetch" href="/lounge/assets/js/20.b63d9e33.js"><link rel="prefetch" href="/lounge/assets/js/21.ab755627.js"><link rel="prefetch" href="/lounge/assets/js/22.2ba3d9b3.js"><link rel="prefetch" href="/lounge/assets/js/23.3c6ed61c.js"><link rel="prefetch" href="/lounge/assets/js/24.dcbc7f1e.js">
    <link rel="stylesheet" href="/lounge/assets/css/1.styles.3ac4ce2d.css"><link rel="stylesheet" href="/lounge/assets/css/2.styles.79fb4200.css"><link rel="stylesheet" href="/lounge/assets/css/styles.12415a86.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lounge/" class="home-link router-link-active"><!----> <span class="site-name">Lounge</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lounge/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/lounge/api/" class="nav-link">API Reference</a></div><div class="nav-item"><a href="https://github.com/bojand/lounge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lounge/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/lounge/api/" class="nav-link">API Reference</a></div><div class="nav-item"><a href="https://github.com/bojand/lounge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/lounge/guide/" class="sidebar-link">Introduction</a></li><li><a href="/lounge/guide/modeling.html" class="sidebar-link">Modeling</a></li><li><a href="/lounge/guide/types.html" class="sidebar-link">Types</a></li><li><a href="/lounge/guide/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/lounge/guide/extend.html" class="sidebar-link">Schema Extension</a></li><li><a href="/lounge/guide/embedded.html" class="sidebar-link">Embedded Documents</a></li><li><a href="/lounge/guide/docops.html" class="sidebar-link">Document Operations</a></li><li><a href="/lounge/guide/population.html" class="sidebar-link">Population</a></li><li><a href="/lounge/guide/simple_indexes.html" class="sidebar-link">Simple Indexes</a></li><li><a href="/lounge/guide/queries.html" class="sidebar-link">Index queries</a></li><li><a href="/lounge/guide/array_indexes.html" class="sidebar-link">Array Indexes</a></li><li><a href="/lounge/guide/embedded_indexes.html" class="sidebar-link">Embedded Indexes</a></li><li><a href="/lounge/guide/compound.html" class="sidebar-link">Compound Indexes</a></li><li><a href="/lounge/guide/lean_queries.html" class="sidebar-link">Lean Queries</a></li><li><a href="/lounge/guide/events.html" class="sidebar-link">Events</a></li><li><a href="/lounge/guide/promises.html" class="sidebar-link">Promises</a></li><li><a href="/lounge/guide/debugging.html" class="sidebar-link">Debug Logging</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="getting-documents"><a href="#getting-documents" aria-hidden="true" class="header-anchor">#</a> Getting Documents</h1> <p>All models created come with a static function <code>findById</code> that can be used to look up a single or multiple keys and
retrieve documents from the database. If key does not exist and document is not found we <strong>do not</strong> return an error
but also no model is generated. This is different than present couchbase module behaviour.</p> <div class="language-js extra-class"><pre class="language-js"><code>User<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token string">'user123'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> doc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// there was an error looking up the key</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>doc<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'no document found'</span><span class="token punctuation">)</span>
  <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span> <span class="token comment">// doc is instance of User and will print it out</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>We can get multiple keys using an array as the first parameter. In this case, the callback invoked is passed 3 arguments
in form <code>(err, documents, misses)</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code>User<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'user123'</span><span class="token punctuation">,</span> <span class="token string">'user456'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> docs<span class="token punctuation">,</span> misses<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// there was an error looking up the key</span>
  console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span>        <span class="token comment">// array of Users found</span>
  console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>misses<span class="token punctuation">)</span>      <span class="token comment">// array if keys not found.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>When <code>findById</code> is invoked using a single string argument the result returned is a single model instance. When an array
is passed in we return the results as described above. To force <code>array</code> type of returns in <strong>all</strong> cases, set the Lounge
config option <code>alwaysReturnArrays</code> to <code>true</code>. Default is <code>false</code>.</p> <p>By default order of the generated objects in an array result is not guaranteed to be the same order as the ids queried.
To keep the order of the returned model instances the same as the ids set <code>keepSortOrder</code> option to <code>true</code>.</p> <p>By default the <code>findById</code> and index query functions return 3 parameters to the callback in form <code>(err, docs, missing)</code>.
If we want to force returning of 2 params at all times <code>(err, docs)</code>, and not return the <code>missing</code> parameter, we can
use the <code>missing</code> options either in <code>Lounge</code> settings to set globally, or individually in function invocations. If
<code>missing</code> option is set to <code>false</code> we won't return missing keys as the final param in the callback.</p> <div class="language-js extra-class"><pre class="language-js"><code>lounge<span class="token punctuation">.</span><span class="token function">setOption</span><span class="token punctuation">(</span><span class="token string">'missing'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
User<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'user123'</span><span class="token punctuation">,</span> <span class="token string">'user456'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> docs<span class="token punctuation">,</span> misses<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// there was an error looking up the key</span>
  console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span>        <span class="token comment">// array of Users found</span>
  console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>misses<span class="token punctuation">)</span>      <span class="token comment">// undefined</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>lounge<span class="token punctuation">.</span><span class="token function">setOption</span><span class="token punctuation">(</span><span class="token string">'missing'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
User<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'user123'</span><span class="token punctuation">,</span> <span class="token string">'user456'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> missing<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> docs<span class="token punctuation">,</span> misses<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// there was an error looking up the key</span>
  console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span>        <span class="token comment">// array of Users found</span>
  console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>misses<span class="token punctuation">)</span>      <span class="token comment">// array of missing keys, as the option in function params takes presidence</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/lounge/assets/js/13.b89e501f.js" defer></script><script src="/lounge/assets/js/app.12415a86.js" defer></script>
  </body>
</html>
